# 文件处理常用工具



## find

`find` 是 Linux 系统中一个非常强大的文件搜索工具，它可以根据各种条件在指定目录下查找文件。

### 基本用法

#### 命令格式

```bash
find [路径] [选项] [操作]
```

#### 常用选项

| 选项             | 说明                                                         |
| :--------------- | :----------------------------------------------------------- |
| `-name pattern`  | 按文件名查找（区分大小写）                                   |
| `-iname pattern` | 按文件名查找（不区分大小写）                                 |
| `-type type`     | 按文件类型查找                                               |
| `-mtime n`       | 按修改文件的时间查找，`n`、`-n`、`+n`，其中：`-`表示n天内，`+`表示n天前 |
| `-size n`        | 按文件大小查找，单位有：`c`(字节)，`k`(KB)，`M`(MB)，`G`(GB) |
| `-user username` | 按用户名查找                                                 |



### 执行操作
- `-print`：打印匹配的文件（默认操作）
- `-delete`：删除匹配的文件
  ~~~bash
  find /tmp -name "*.tmp" -delete
  ~~~
- `-exec command {} \;`：对匹配的文件执行命令
  ~~~bash
  find . -name "*.bak" -exec rm {} \;		# 执行rm命令，{}表示输入源，\;是固定格式
  ~~~
- `-ok command {} \;`：类似 `-exec`，但执行前询问确认
- `-ls`：以 `ls -dils` 格式列出文件



### 实用示例

| 命令                                             | 需求                                                 |
| :----------------------------------------------- | :--------------------------------------------------- |
| `find . -name "*.conf"`                          | 查找当前目录下所有 `.conf` 文件                      |
| `find / -type f -size +50M`                      | 查找系统中大于 50MB 的文件                           |
| `find /home -mtime -7 -ls`                       | 查找 `/home` 目录下 7 天内修改过的文件并列出详细信息 |
| `find /tmp -empty`                               | 查找 `/tmp` 目录下的空文件或空目录                   |
| `find /var/tmp -name "*.tmp" -exec rm -f {} \;`  | 查找并删除 `/var/tmp` 下所有 `.tmp` 文件             |
| `find . -type f -perm 777 -exec chmod 644 {} \;` | 查找当前目录下权限为 `777` 的文件并修改为 `644`      |
| `find /var/log -name "*.log" -exec gzip {} \;`   | 查找 `/var/log` 下所有 `.log` 文件并压缩             |



## sort

`sort` 是对文本文件或输入流进行排序的强大工具。它可以按字母、数字或其他规则对行进行排序，并支持多种排序选项。

### 基本语法

#### 命令格式

```bash
sort [选项] [文件]
```

如果不指定文件，`sort` 会从标准输入读取数据。即 `sort` 支持管道。

### 常用选项

| 选项                         | 功能说明                          |
| :--------------------------- | :-------------------------------- |
| `-r`, `--reverse`            | 反向排序（降序）                  |
| `-f`, `--ignore-case`        | 忽略大小写                        |
| `-n`, `--numeric-sort`       | 按数值大小排序                    |
| `-h`, `--human-numeric-sort` | 按人类可读的数字排序（如 2K, 1G） |
| `-R`, `--random-sort`        | 随机排序                          |
| `-t`                         | 指定字段分隔符（默认为空白字符）  |
| `-k`                         | 指定字段排序                      |
| `-o`,`--output=FILE`         | 将结果输出到指定文件              |
| `-u`,`--unique`              | 去除重复行（只输出唯一的行）      |

### 实用示例

| 命令                              | 功能说明                         |
| :-------------------------------- | :------------------------------- |
| `sort file.txt`                   | 按字母顺序排序文件               |
| `sort -n numbers.txt`             | 按数字大小排序                   |
| `sort -r file.txt`                | 反向排序（降序）                 |
| `sort -k2 data.txt`               | 按第二列排序（默认以空白分隔）   |
| `sort -k3 -n data.txt`            | 按第三列数字排序                 |
| `sort -t',' -k2 csvfile.csv`      | 使用逗号作为分隔符，按第二列排序 |
| `sort -k2.3 data.txt`             | 按第2列第3个字符排序             |
| `sort -m sorted1.txt sorted2.txt` | 合并多个已排序文件               |



## uniq

`uniq` 是 Linux 中用于**检测和删除连续重复行**的实用工具，通常与 `sort` 命令结合使用。

### 基本语法

#### 命令格式

```bash
uniq [选项] [输入文件 [输出文件]]
```

如果不指定文件，`uniq` 会从标准输入读取数据。即支持管道。

### 常用选项

| 选项                              | 功能描述                               |
| :-------------------------------- | :------------------------------------- |
| `-c` 或 `--count`                 | 在每行前显示该行重复出现的次数         |
| `-d` 或 `--repeated`              | 仅显示重复的行（每组重复行只显示一次） |
| `-D` 或 `--all-repeated[=METHOD]` | 显示所有重复行                         |
| `-u` 或 `--unique`                | 仅显示不重复的行                       |
| `-i` 或 `--ignore-case`           | 忽略大小写                             |
| `-f N` 或 `--skip-fields=N`       | 跳过前 N 个字段（字段以空白分隔）      |
| `-s N` 或 `--skip-chars=N`        | 跳过前 N 个字符                        |
| `-w N` 或 `--check-chars=N`       | 只比较每行的前 N 个字符（注意中文）    |



### 实用示例

| 命令                      | 功能说明                          |
| :------------------------ | :-------------------------------- |
| `uniq file.txt`           | 去除连续重复行                    |
| `uniq -c file.txt`        | 统计每行重复次数                  |
| `uniq -d file.txt`        | 仅显示重复行                      |
| `uniq -D file.txt`        | 显示所有重复行                    |
| `uniq -u file.txt`        | 仅显示不重复的行                  |
| `uniq -i file.txt`        | 忽略大小写进行比较                |
| `uniq -f 2 data.txt`      | 跳过前2个字段进行比较             |
| `uniq -s 5 data.txt`      | 跳过前5个字符进行比较             |
| `uniq -w 10 data.txt`     | 只比较每行的前10个字符            |
| `uniq -f 3 -d access.log` | 查找重复的IP地址（跳过前3个字段） |

**其他**

处理排序后的文件（去除所有重复行）

~~~bash
sort file.txt | uniq
~~~

统计日志中每种错误出现的次数

~~~bash
grep "ERROR" logfile | sort | uniq -c | sort -nr
~~~



## wc

`wc`（word count）是 Linux 中用于统计文件或输入流中字节数、字数、行数等信息的实用命令。

### 基本语法

#### 命令格式

~~~bash
wc [选项] [文件...]
~~~

如果不指定文件，`wc` 会从标准输入读取数据。支持管道。

## 常用选项

| 选项                        | 功能描述                 |
| :-------------------------- | :----------------------- |
| `-c` 或 `--bytes`           | 统计字节数               |
| `-m` 或 `--chars`           | 统计字符数（注意中文）   |
| `-l` 或 `--lines`           | 统计行数                 |
| `-w` 或 `--words`           | 统计单词数（以空白分隔） |
| `-L` 或 `--max-line-length` | 显示最长行的长度         |

默认情况下（不带任何选项），`wc` 会输出以下信息：

~~~bash
行数 单词数 字节数 文件名
~~~





## cut

`cut` 是 Linux 中用于从文件或输入流中提取特定列或字符的强大工具，特别适合处理结构化文本数据。

### 基本语法

#### 命令格式

```bash
cut [选项] [文件]
```

如果不指定文件，`cut` 会从标准输入读取数据。即支持管道。

### 主要选项

| 选项                        | 功能描述                         |
| :-------------------------- | :------------------------------- |
| `-b` 或 `--bytes=LIST`      | 按字节位置切割                   |
| `-c` 或 `--characters=LIST` | 按字符位置切割                   |
| `-d` 或 `--delimiter=DELIM` | 指定字段分隔符（默认为TAB）      |
| `-f` 或 `--fields=LIST`     | 按字段位置切割（需配合`-d`使用） |
| `--complement`              | 反选（显示未被选中的部分）       |

### 实用示例

| 命令                                  | 功能说明                                       |
| :------------------------------------ | :--------------------------------------------- |
| `cut -c5-9 file.txt`                  | 提取每行的第5-9个字符                          |
| `cut -f1,3,5 data.txt`                | 提取第1、3、5个字段（默认TAB分隔）             |
| `cut -d',' -f2 csvfile.csv`           | 使用逗号作为分隔符提取第2个字段                |
| `cut -d':' -f1 /etc/passwd`           | 提取用户名（/etc/passwd的第1个字段，冒号分隔） |
| `cut -d' ' -f1 access.log`            | 提取IP地址（从日志中提取第1个字段）            |
| `cut -d',' -f1,3-5 data.csv`          | 提取多个不连续字段                             |
| `cut -d',' --complement -f2 data.csv` | 显示除第2字段外的所有内容                      |
| `cut -c10-15,20-25 fixedwidth.txt`    | 处理固定宽度文件（提取第10-15和20-25列）       |





